/**
 * i18n-dashboard-pricing.js
 * Injects translation keys for dashboard components + pricing components
 * into all 5 language JSON files (en, vi, id, ms, th).
 */
const fs = require('fs');
const path = require('path');

const MESSAGES_DIR = path.join(__dirname, '..', 'messages');
const LANGS = ['en', 'vi', 'id', 'ms', 'th'];

// ═══════════════════════════════════════════════════════════════
// NEW NAMESPACES TO ADD
// ═══════════════════════════════════════════════════════════════

const NEW_KEYS = {
    // ── dashboard/page.tsx (server component) ──
    dashboard: {
        en: {
            subtitleWithRooms: "Dashboard • {capacity} rooms",
            hotelNotConfigured: "⚠️ Hotel ID Not Configured",
            hotelNotConfiguredDesc: "Please add DEFAULT_HOTEL_ID to file .env",
            goToSettings: "Go to Settings →",
            noOtbData: "No OTB data. Please upload reservations and build OTB.",
            uploadReservations: "upload reservations",
            buildOtb: "build OTB",
            setupWarning: "Hotels not configured! Go to Settings to enter room count and other info.",
            goToSettingsLink: "Go to Settings",
        },
        vi: {
            subtitleWithRooms: "Bảng điều khiển • {capacity} phòng",
            hotelNotConfigured: "⚠️ Chưa cấu hình Hotel ID",
            hotelNotConfiguredDesc: "Vui lòng thêm DEFAULT_HOTEL_ID vào file .env",
            goToSettings: "Đi tới Cài đặt →",
            noOtbData: "Chưa có dữ liệu OTB. Vui lòng tải lên đặt phòng và xây dựng OTB.",
            uploadReservations: "tải lên đặt phòng",
            buildOtb: "xây dựng OTB",
            setupWarning: "Khách sạn chưa cấu hình! Vào Cài đặt để nhập số phòng và thông tin khác.",
            goToSettingsLink: "Đi tới Cài đặt",
        },
        id: {
            subtitleWithRooms: "Dasbor • {capacity} kamar",
            hotelNotConfigured: "⚠️ Hotel ID Belum Dikonfigurasi",
            hotelNotConfiguredDesc: "Silakan tambahkan DEFAULT_HOTEL_ID ke file .env",
            goToSettings: "Ke Pengaturan →",
            noOtbData: "Tidak ada data OTB. Silakan unggah reservasi dan bangun OTB.",
            uploadReservations: "unggah reservasi",
            buildOtb: "bangun OTB",
            setupWarning: "Hotel belum dikonfigurasi! Ke Pengaturan untuk memasukkan jumlah kamar.",
            goToSettingsLink: "Ke Pengaturan",
        },
        ms: {
            subtitleWithRooms: "Papan Pemuka • {capacity} bilik",
            hotelNotConfigured: "⚠️ Hotel ID Belum Dikonfigurasi",
            hotelNotConfiguredDesc: "Sila tambah DEFAULT_HOTEL_ID ke fail .env",
            goToSettings: "Ke Tetapan →",
            noOtbData: "Tiada data OTB. Sila muat naik tempahan dan bina OTB.",
            uploadReservations: "muat naik tempahan",
            buildOtb: "bina OTB",
            setupWarning: "Hotel belum dikonfigurasi! Ke Tetapan untuk masukkan bilangan bilik.",
            goToSettingsLink: "Ke Tetapan",
        },
        th: {
            subtitleWithRooms: "แดชบอร์ด • {capacity} ห้อง",
            hotelNotConfigured: "⚠️ ยังไม่ได้กำหนดค่า Hotel ID",
            hotelNotConfiguredDesc: "กรุณาเพิ่ม DEFAULT_HOTEL_ID ในไฟล์ .env",
            goToSettings: "ไปยังการตั้งค่า →",
            noOtbData: "ไม่มีข้อมูล OTB กรุณาอัปโหลดการจองและสร้าง OTB",
            uploadReservations: "อัปโหลดการจอง",
            buildOtb: "สร้าง OTB",
            setupWarning: "โรงแรมยังไม่ได้กำหนดค่า! ไปที่การตั้งค่าเพื่อกรอกจำนวนห้อง",
            goToSettingsLink: "ไปยังการตั้งค่า",
        },
    },

    // ── OtbChart.tsx ──
    otbChart: {
        en: {
            title: "OTB vs Last Year",
            days14: "14 days", days30: "30 days", days60: "60 days", days90: "90 days",
            thisYear: "This Year", lastYear: "Last Year", noneYet: "(none yet)",
            otbThisYear: "OTB This Year",
        },
        vi: {
            title: "OTB so với năm trước",
            days14: "14 ngày", days30: "30 ngày", days60: "60 ngày", days90: "90 ngày",
            thisYear: "Năm nay", lastYear: "Năm trước", noneYet: "(chưa có)",
            otbThisYear: "OTB năm nay",
        },
        id: {
            title: "OTB vs Tahun Lalu",
            days14: "14 hari", days30: "30 hari", days60: "60 hari", days90: "90 hari",
            thisYear: "Tahun Ini", lastYear: "Tahun Lalu", noneYet: "(belum ada)",
            otbThisYear: "OTB Tahun Ini",
        },
        ms: {
            title: "OTB vs Tahun Lepas",
            days14: "14 hari", days30: "30 hari", days60: "60 hari", days90: "90 hari",
            thisYear: "Tahun Ini", lastYear: "Tahun Lepas", noneYet: "(belum ada)",
            otbThisYear: "OTB Tahun Ini",
        },
        th: {
            title: "OTB เทียบกับปีที่แล้ว",
            days14: "14 วัน", days30: "30 วัน", days60: "60 วัน", days90: "90 วัน",
            thisYear: "ปีนี้", lastYear: "ปีที่แล้ว", noneYet: "(ยังไม่มี)",
            otbThisYear: "OTB ปีนี้",
        },
    },

    // ── InsightsPanel.tsx ──
    insights: {
        en: {
            title: "Analytics & Insights",
            notEnoughData: "Not enough data. Upload more reservations.",
            topActions: "Top actions",
            otherDays: "Other Days to Watch",
            topActionsNext7: "Top actions — next 7 days",
            collapse: "Collapse",
            moreInsights: "+{count} more insights",
            daysToWatch: "Days to watch (outside top 3)",
            noNotableDays: "No notable days outside Top 3",
            situation: "Situation",
            soWhat: "So What",
            doThis: "Do This",
            estimatedImpact: "Estimated Impact",
            confidence: "Confidence: {level}",
        },
        vi: {
            title: "Phân tích & Nhận định",
            notEnoughData: "Chưa đủ dữ liệu. Tải thêm đặt phòng.",
            topActions: "Hành động ưu tiên",
            otherDays: "Ngày cần theo dõi",
            topActionsNext7: "Hành động ưu tiên — 7 ngày tới",
            collapse: "Thu gọn",
            moreInsights: "+{count} nhận định khác",
            daysToWatch: "Ngày cần theo dõi (ngoài top 3)",
            noNotableDays: "Không có ngày đáng chú ý ngoài Top 3",
            situation: "Tình huống",
            soWhat: "Ý nghĩa",
            doThis: "Hành động",
            estimatedImpact: "Tác động dự kiến",
            confidence: "Độ tin cậy: {level}",
        },
        id: {
            title: "Analitik & Wawasan",
            notEnoughData: "Data belum cukup. Unggah lebih banyak reservasi.",
            topActions: "Aksi teratas",
            otherDays: "Hari perlu diperhatikan",
            topActionsNext7: "Aksi teratas — 7 hari ke depan",
            collapse: "Tutup",
            moreInsights: "+{count} wawasan lainnya",
            daysToWatch: "Hari perlu diperhatikan (di luar top 3)",
            noNotableDays: "Tidak ada hari penting di luar Top 3",
            situation: "Situasi",
            soWhat: "Jadi Apa",
            doThis: "Lakukan Ini",
            estimatedImpact: "Dampak Perkiraan",
            confidence: "Keyakinan: {level}",
        },
        ms: {
            title: "Analitik & Pandangan",
            notEnoughData: "Data tidak mencukupi. Muat naik lebih banyak tempahan.",
            topActions: "Tindakan teratas",
            otherDays: "Hari perlu diperhatikan",
            topActionsNext7: "Tindakan teratas — 7 hari seterusnya",
            collapse: "Tutup",
            moreInsights: "+{count} pandangan lain",
            daysToWatch: "Hari perlu dipantau (di luar top 3)",
            noNotableDays: "Tiada hari penting di luar Top 3",
            situation: "Situasi",
            soWhat: "Jadi Apa",
            doThis: "Buat Ini",
            estimatedImpact: "Kesan Anggaran",
            confidence: "Keyakinan: {level}",
        },
        th: {
            title: "วิเคราะห์ & ข้อมูลเชิงลึก",
            notEnoughData: "ข้อมูลไม่เพียงพอ อัปโหลดการจองเพิ่มเติม",
            topActions: "การดำเนินการสำคัญ",
            otherDays: "วันที่ต้องจับตา",
            topActionsNext7: "การดำเนินการสำคัญ — 7 วันถัดไป",
            collapse: "ย่อ",
            moreInsights: "+{count} ข้อมูลเชิงลึกเพิ่มเติม",
            daysToWatch: "วันที่ต้องจับตา (นอก top 3)",
            noNotableDays: "ไม่มีวันสำคัญนอก Top 3",
            situation: "สถานการณ์",
            soWhat: "สิ่งที่ต้องรู้",
            doThis: "สิ่งที่ต้องทำ",
            estimatedImpact: "ผลกระทบโดยประมาณ",
            confidence: "ความเชื่อมั่น: {level}",
        },
    },

    // ── TopAccountsTable.tsx ──
    topAccounts: {
        en: {
            title: "Top Accounts",
            noData: "No data available",
            noBookingData: "No booking data available in the next {days} days.",
            thAccount: "Account", thSegment: "Segment", thRoomNights: "Room-nights",
            thRevenue: "Revenue", thAdr: "ADR", thCancel: "Cancel",
            clickHint: "Click a row to view account details",
            failedToLoad: "Failed to load data",
            days: "({days} days)",
        },
        vi: {
            title: "Tài khoản hàng đầu",
            noData: "Không có dữ liệu",
            noBookingData: "Không có dữ liệu đặt phòng trong {days} ngày tới.",
            thAccount: "Tài khoản", thSegment: "Phân khúc", thRoomNights: "Đêm phòng",
            thRevenue: "Doanh thu", thAdr: "ADR", thCancel: "Hủy",
            clickHint: "Nhấn vào hàng để xem chi tiết",
            failedToLoad: "Không thể tải dữ liệu",
            days: "({days} ngày)",
        },
        id: {
            title: "Akun Teratas",
            noData: "Tidak ada data",
            noBookingData: "Tidak ada data pemesanan dalam {days} hari ke depan.",
            thAccount: "Akun", thSegment: "Segmen", thRoomNights: "Malam kamar",
            thRevenue: "Pendapatan", thAdr: "ADR", thCancel: "Batal",
            clickHint: "Klik baris untuk melihat detail",
            failedToLoad: "Gagal memuat data",
            days: "({days} hari)",
        },
        ms: {
            title: "Akaun Teratas",
            noData: "Tiada data",
            noBookingData: "Tiada data tempahan dalam {days} hari seterusnya.",
            thAccount: "Akaun", thSegment: "Segmen", thRoomNights: "Malam bilik",
            thRevenue: "Hasil", thAdr: "ADR", thCancel: "Batal",
            clickHint: "Klik baris untuk melihat butiran",
            failedToLoad: "Gagal memuatkan data",
            days: "({days} hari)",
        },
        th: {
            title: "บัญชีชั้นนำ",
            noData: "ไม่มีข้อมูล",
            noBookingData: "ไม่มีข้อมูลการจองใน {days} วันถัดไป",
            thAccount: "บัญชี", thSegment: "กลุ่ม", thRoomNights: "คืนห้อง",
            thRevenue: "รายได้", thAdr: "ADR", thCancel: "ยกเลิก",
            clickHint: "คลิกแถวเพื่อดูรายละเอียด",
            failedToLoad: "ไม่สามารถโหลดข้อมูล",
            days: "({days} วัน)",
        },
    },

    // ── RoomLosMixPanel.tsx ──
    roomLosMix: {
        en: {
            title: "Room Mix & LOS",
            roomTypeShare: "Room Type Share",
            lengthOfStay: "Length of Stay",
            noData: "No data available.",
            failedToLoad: "Failed to load data",
        },
        vi: {
            title: "Loại phòng & Thời gian lưu trú",
            roomTypeShare: "Tỷ lệ loại phòng",
            lengthOfStay: "Thời gian lưu trú",
            noData: "Không có dữ liệu.",
            failedToLoad: "Không thể tải dữ liệu",
        },
        id: {
            title: "Campuran Kamar & LOS",
            roomTypeShare: "Pangsa Tipe Kamar",
            lengthOfStay: "Lama Menginap",
            noData: "Tidak ada data.",
            failedToLoad: "Gagal memuat data",
        },
        ms: {
            title: "Campuran Bilik & LOS",
            roomTypeShare: "Pecahan Jenis Bilik",
            lengthOfStay: "Tempoh Penginapan",
            noData: "Tiada data.",
            failedToLoad: "Gagal memuatkan data",
        },
        th: {
            title: "ส่วนผสมห้อง & LOS",
            roomTypeShare: "สัดส่วนประเภทห้อง",
            lengthOfStay: "ระยะเวลาเข้าพัก",
            noData: "ไม่มีข้อมูล",
            failedToLoad: "ไม่สามารถโหลดข้อมูล",
        },
    },

    // ── LeadTimeBuckets.tsx (remaining hardcoded) ──
    // Already has useTranslations('analytics') — we add to 'analytics' namespace
    // Keys: leadTimeTitle, avgLeadTime, daysUnit, bookings, leadTimeLabel
    // (these will be injected into the existing 'analytics' namespace)

    // ── SetupTab.tsx ──
    setupTab: {
        en: {
            title: "Pricing Setup",
            roomTypesTitle: "Room Types", roomTypesDesc: "Configure your room types and net (base) prices.",
            addRoomType: "Add Room Type", editRoomType: "Edit Room Type",
            roomName: "Room Name", netPrice: "Net Price (VND)",
            description: "Description (optional)", save: "Save", saving: "Saving...",
            cancel: "Cancel", delete: "Delete", edit: "Edit",
            noRoomTypes: "No room types configured yet.",
            otaChannelsTitle: "OTA Channels", otaChannelsDesc: "Configure your distribution channels and commissions.",
            addChannel: "Add Channel", editChannel: "Edit Channel",
            channelName: "Channel Name", channelCode: "Channel Code",
            commission: "Commission %", calcType: "Calculation Type",
            progressive: "Progressive", additive: "Additive", singleDiscount: "Single Discount",
            active: "Active", inactive: "Inactive",
            noChannels: "No channels configured yet.",
            demoWarning: "Demo mode — changes won't be saved.",
        },
        vi: {
            title: "Thiết lập giá",
            roomTypesTitle: "Loại phòng", roomTypesDesc: "Cấu hình loại phòng và giá gốc (net).",
            addRoomType: "Thêm loại phòng", editRoomType: "Sửa loại phòng",
            roomName: "Tên phòng", netPrice: "Giá Net (VND)",
            description: "Mô tả (tùy chọn)", save: "Lưu", saving: "Đang lưu...",
            cancel: "Hủy", delete: "Xóa", edit: "Sửa",
            noRoomTypes: "Chưa cấu hình loại phòng nào.",
            otaChannelsTitle: "Kênh OTA", otaChannelsDesc: "Cấu hình các kênh phân phối và hoa hồng.",
            addChannel: "Thêm kênh", editChannel: "Sửa kênh",
            channelName: "Tên kênh", channelCode: "Mã kênh",
            commission: "Hoa hồng %", calcType: "Cách tính",
            progressive: "Lũy tiến", additive: "Cộng dồn", singleDiscount: "Giảm giá đơn",
            active: "Hoạt động", inactive: "Tắt",
            noChannels: "Chưa cấu hình kênh nào.",
            demoWarning: "Chế độ demo — thay đổi sẽ không được lưu.",
        },
        id: {
            title: "Pengaturan Harga",
            roomTypesTitle: "Tipe Kamar", roomTypesDesc: "Konfigurasi tipe kamar dan harga dasar (net).",
            addRoomType: "Tambah Tipe Kamar", editRoomType: "Edit Tipe Kamar",
            roomName: "Nama Kamar", netPrice: "Harga Net (VND)",
            description: "Deskripsi (opsional)", save: "Simpan", saving: "Menyimpan...",
            cancel: "Batal", delete: "Hapus", edit: "Edit",
            noRoomTypes: "Belum ada tipe kamar.",
            otaChannelsTitle: "Saluran OTA", otaChannelsDesc: "Konfigurasi saluran distribusi dan komisi.",
            addChannel: "Tambah Saluran", editChannel: "Edit Saluran",
            channelName: "Nama Saluran", channelCode: "Kode Saluran",
            commission: "Komisi %", calcType: "Tipe Kalkulasi",
            progressive: "Progresif", additive: "Aditif", singleDiscount: "Diskon Tunggal",
            active: "Aktif", inactive: "Nonaktif",
            noChannels: "Belum ada saluran.",
            demoWarning: "Mode demo — perubahan tidak akan disimpan.",
        },
        ms: {
            title: "Tetapan Harga",
            roomTypesTitle: "Jenis Bilik", roomTypesDesc: "Konfigurasi jenis bilik dan harga asas (net).",
            addRoomType: "Tambah Jenis Bilik", editRoomType: "Edit Jenis Bilik",
            roomName: "Nama Bilik", netPrice: "Harga Net (VND)",
            description: "Penerangan (pilihan)", save: "Simpan", saving: "Menyimpan...",
            cancel: "Batal", delete: "Padam", edit: "Edit",
            noRoomTypes: "Tiada jenis bilik.",
            otaChannelsTitle: "Saluran OTA", otaChannelsDesc: "Konfigurasi saluran pengedaran dan komisen.",
            addChannel: "Tambah Saluran", editChannel: "Edit Saluran",
            channelName: "Nama Saluran", channelCode: "Kod Saluran",
            commission: "Komisen %", calcType: "Jenis Pengiraan",
            progressive: "Progresif", additive: "Aditif", singleDiscount: "Diskaun Tunggal",
            active: "Aktif", inactive: "Tidak aktif",
            noChannels: "Tiada saluran.",
            demoWarning: "Mod demo — perubahan tidak akan disimpan.",
        },
        th: {
            title: "ตั้งค่าราคา",
            roomTypesTitle: "ประเภทห้อง", roomTypesDesc: "กำหนดค่าประเภทห้องและราคาพื้นฐาน (net)",
            addRoomType: "เพิ่มประเภทห้อง", editRoomType: "แก้ไขประเภทห้อง",
            roomName: "ชื่อห้อง", netPrice: "ราคา Net (VND)",
            description: "คำอธิบาย (ไม่บังคับ)", save: "บันทึก", saving: "กำลังบันทึก...",
            cancel: "ยกเลิก", delete: "ลบ", edit: "แก้ไข",
            noRoomTypes: "ยังไม่มีประเภทห้อง",
            otaChannelsTitle: "ช่อง OTA", otaChannelsDesc: "กำหนดค่าช่องทางจัดจำหน่ายและค่าคอมมิชชัน",
            addChannel: "เพิ่มช่อง", editChannel: "แก้ไขช่อง",
            channelName: "ชื่อช่อง", channelCode: "รหัสช่อง",
            commission: "ค่าคอมมิชชัน %", calcType: "ประเภทการคำนวณ",
            progressive: "แบบก้าวหน้า", additive: "แบบสะสม", singleDiscount: "ส่วนลดเดี่ยว",
            active: "เปิดใช้งาน", inactive: "ปิด",
            noChannels: "ยังไม่มีช่อง",
            demoWarning: "โหมดสาธิต — การเปลี่ยนแปลงจะไม่ถูกบันทึก",
        },
    },

    // ── OverviewTab.tsx ──  
    overviewTab: {
        en: {
            title: "Price Overview Matrix",
            subtitle: "All prices calculated automatically from your setup.",
            loading: "Loading price matrix...",
            noSetup: "Please configure room types and OTA channels first.",
            goToSetup: "Go to Setup tab",
            viewMode: "View Mode:",
            netRevenue: "Revenue", barPrice: "BAR", displayPrice: "Display",
            calculate: "Recalculate", exportCsv: "Export CSV", exportPdf: "Export PDF",
            thRoomType: "Room Type",
            retention: "Retention", retentionGood: "Good", retentionLow: "Low",
            retentionCritical: "Critical",
            customPrice: "Custom price",
            clickToTrace: "Hover to see calculation trace",
        },
        vi: {
            title: "Ma trận giá tổng quan",
            subtitle: "Tất cả giá được tính tự động từ thiết lập của bạn.",
            loading: "Đang tải ma trận giá...",
            noSetup: "Vui lòng cấu hình loại phòng và kênh OTA trước.",
            goToSetup: "Đi tới tab Thiết lập",
            viewMode: "Chế độ xem:",
            netRevenue: "Doanh thu", barPrice: "BAR", displayPrice: "Giá hiển thị",
            calculate: "Tính lại", exportCsv: "Xuất CSV", exportPdf: "Xuất PDF",
            thRoomType: "Loại phòng",
            retention: "Tỷ lệ giữ lại", retentionGood: "Tốt", retentionLow: "Thấp",
            retentionCritical: "Nguy hiểm",
            customPrice: "Giá tùy chỉnh",
            clickToTrace: "Di chuột để xem chi tiết tính giá",
        },
        id: {
            title: "Matriks Harga",
            subtitle: "Semua harga dihitung otomatis dari pengaturan Anda.",
            loading: "Memuat matriks harga...",
            noSetup: "Silakan konfigurasi tipe kamar dan saluran OTA terlebih dahulu.",
            goToSetup: "Ke tab Pengaturan",
            viewMode: "Mode Tampilan:",
            netRevenue: "Pendapatan", barPrice: "BAR", displayPrice: "Tampilan",
            calculate: "Hitung Ulang", exportCsv: "Ekspor CSV", exportPdf: "Ekspor PDF",
            thRoomType: "Tipe Kamar",
            retention: "Retensi", retentionGood: "Baik", retentionLow: "Rendah",
            retentionCritical: "Kritis",
            customPrice: "Harga kustom",
            clickToTrace: "Arahkan kursor untuk melihat jejak kalkulasi",
        },
        ms: {
            title: "Matriks Harga",
            subtitle: "Semua harga dikira secara automatik daripada tetapan anda.",
            loading: "Memuatkan matriks harga...",
            noSetup: "Sila konfigurasi jenis bilik dan saluran OTA terlebih dahulu.",
            goToSetup: "Ke tab Tetapan",
            viewMode: "Mod Paparan:",
            netRevenue: "Hasil", barPrice: "BAR", displayPrice: "Paparan",
            calculate: "Kira Semula", exportCsv: "Eksport CSV", exportPdf: "Eksport PDF",
            thRoomType: "Jenis Bilik",
            retention: "Pengekalan", retentionGood: "Baik", retentionLow: "Rendah",
            retentionCritical: "Kritikal",
            customPrice: "Harga tersuai",
            clickToTrace: "Alih kursor untuk melihat jejak pengiraan",
        },
        th: {
            title: "ตารางราคารวม",
            subtitle: "ราคาทั้งหมดคำนวณอัตโนมัติจากการตั้งค่าของคุณ",
            loading: "กำลังโหลดตารางราคา...",
            noSetup: "กรุณาตั้งค่าประเภทห้องและช่อง OTA ก่อน",
            goToSetup: "ไปที่แท็บตั้งค่า",
            viewMode: "โหมดดู:",
            netRevenue: "รายได้", barPrice: "BAR", displayPrice: "แสดงผล",
            calculate: "คำนวณใหม่", exportCsv: "ส่งออก CSV", exportPdf: "ส่งออก PDF",
            thRoomType: "ประเภทห้อง",
            retention: "อัตราคงเหลือ", retentionGood: "ดี", retentionLow: "ต่ำ",
            retentionCritical: "วิกฤต",
            customPrice: "ราคากำหนดเอง",
            clickToTrace: "วางเมาส์เพื่อดูขั้นตอนการคำนวณ",
        },
    },

    // ── DynamicPricingTab.tsx ──
    dynamicTab: {
        en: {
            title: "Dynamic Pricing Matrix",
            subtitle: "Prices adjust automatically based on occupancy tiers.",
            loading: "Loading dynamic matrix...",
            noSetup: "Configure room types and OTA channels first.",
            viewMode: "View:", netView: "Revenue", barView: "BAR", displayView: "Display",
            exportCsv: "Export CSV", configTiers: "Configure Tiers",
            thRoomType: "Room Type",
            currentOcc: "Current Occ",
            activeTier: "Active tier",
            violation: "Violation",
            noData: "No data available",
            seasonLabel: "Season:",
            allSeasons: "All Seasons",
            guardrails: "Guardrails",
        },
        vi: {
            title: "Ma trận giá động",
            subtitle: "Giá tự động điều chỉnh dựa trên mức công suất.",
            loading: "Đang tải ma trận giá động...",
            noSetup: "Cấu hình loại phòng và kênh OTA trước.",
            viewMode: "Xem:", netView: "Doanh thu", barView: "BAR", displayView: "Giá hiển thị",
            exportCsv: "Xuất CSV", configTiers: "Cấu hình mức",
            thRoomType: "Loại phòng",
            currentOcc: "Công suất hiện tại",
            activeTier: "Mức đang áp dụng",
            violation: "Vi phạm",
            noData: "Không có dữ liệu",
            seasonLabel: "Mùa:",
            allSeasons: "Tất cả mùa",
            guardrails: "Giới hạn giá",
        },
        id: {
            title: "Matriks Harga Dinamis",
            subtitle: "Harga disesuaikan otomatis berdasarkan tingkat okupansi.",
            loading: "Memuat matriks dinamis...",
            noSetup: "Konfigurasi tipe kamar dan saluran OTA terlebih dahulu.",
            viewMode: "Tampilan:", netView: "Pendapatan", barView: "BAR", displayView: "Tampilan",
            exportCsv: "Ekspor CSV", configTiers: "Konfigurasi Tingkat",
            thRoomType: "Tipe Kamar",
            currentOcc: "Okupansi Saat Ini",
            activeTier: "Tingkat aktif",
            violation: "Pelanggaran",
            noData: "Tidak ada data",
            seasonLabel: "Musim:",
            allSeasons: "Semua Musim",
            guardrails: "Batas harga",
        },
        ms: {
            title: "Matriks Harga Dinamik",
            subtitle: "Harga disesuaikan secara automatik berdasarkan tahap penghunian.",
            loading: "Memuatkan matriks dinamik...",
            noSetup: "Konfigurasi jenis bilik dan saluran OTA terlebih dahulu.",
            viewMode: "Paparan:", netView: "Hasil", barView: "BAR", displayView: "Paparan",
            exportCsv: "Eksport CSV", configTiers: "Konfigurasi Tahap",
            thRoomType: "Jenis Bilik",
            currentOcc: "Penghunian Semasa",
            activeTier: "Tahap aktif",
            violation: "Pelanggaran",
            noData: "Tiada data",
            seasonLabel: "Musim:",
            allSeasons: "Semua Musim",
            guardrails: "Had harga",
        },
        th: {
            title: "ตารางราคาแบบไดนามิก",
            subtitle: "ราคาปรับอัตโนมัติตามอัตราการเข้าพัก",
            loading: "กำลังโหลดตารางไดนามิก...",
            noSetup: "กำหนดค่าประเภทห้องและช่อง OTA ก่อน",
            viewMode: "ดู:", netView: "รายได้", barView: "BAR", displayView: "แสดงผล",
            exportCsv: "ส่งออก CSV", configTiers: "กำหนดค่าระดับ",
            thRoomType: "ประเภทห้อง",
            currentOcc: "อัตราเข้าพักปัจจุบัน",
            activeTier: "ระดับที่ใช้งาน",
            violation: "การละเมิด",
            noData: "ไม่มีข้อมูล",
            seasonLabel: "ฤดูกาล:",
            allSeasons: "ทุกฤดูกาล",
            guardrails: "ขีดจำกัดราคา",
        },
    },

    // ── PromotionsTab.tsx ──
    promotionsTab: {
        en: {
            title: "Promotions & Discounts",
            selectChannel: "Select a channel to manage promotions",
            noChannels: "No OTA channels configured. Go to Setup tab first.",
            addPromotion: "Add Promotion",
            discount: "Discount",
            active: "Active", inactive: "Inactive",
            delete: "Delete", stackable: "Stackable",
            noPromotions: "No promotions in this group. Click to add.",
            clickToAdd: "Click to add",
            totalDiscount: "Total Discount",
            barPrice: "BAR (Channel Manager)",
            displayPrice: "Guest Display Price",
            netRevenue: "Net Revenue",
            priceCalculator: "Price Calculator",
            pricingExplanation: "Pricing Explanation",
            step: "Step",
            marketingPrograms: "Marketing Programs",
            seasonal: "Seasonal", essential: "Essential", targeted: "Targeted",
            genius: "Genius", portfolio: "Portfolio", campaign: "Campaign",
        },
        vi: {
            title: "Khuyến mãi & Giảm giá",
            selectChannel: "Chọn kênh để quản lý khuyến mãi",
            noChannels: "Chưa cấu hình kênh OTA. Vào tab Thiết lập trước.",
            addPromotion: "Thêm khuyến mãi",
            discount: "Giảm giá",
            active: "Hoạt động", inactive: "Tắt",
            delete: "Xóa", stackable: "Chồng chéo",
            noPromotions: "Chưa có khuyến mãi trong nhóm này. Nhấn để thêm.",
            clickToAdd: "Nhấn để thêm",
            totalDiscount: "Tổng giảm giá",
            barPrice: "BAR (Giá kênh)",
            displayPrice: "Giá hiển thị khách",
            netRevenue: "Doanh thu thực",
            priceCalculator: "Tính giá",
            pricingExplanation: "Giải thích tính giá",
            step: "Bước",
            marketingPrograms: "Chương trình Marketing",
            seasonal: "Theo mùa", essential: "Thiết yếu", targeted: "Nhắm mục tiêu",
            genius: "Genius", portfolio: "Danh mục", campaign: "Chiến dịch",
        },
        id: {
            title: "Promosi & Diskon",
            selectChannel: "Pilih saluran untuk mengelola promosi",
            noChannels: "Belum ada saluran OTA. Ke tab Pengaturan terlebih dahulu.",
            addPromotion: "Tambah Promosi",
            discount: "Diskon",
            active: "Aktif", inactive: "Nonaktif",
            delete: "Hapus", stackable: "Dapat Ditumpuk",
            noPromotions: "Belum ada promosi di grup ini. Klik untuk menambahkan.",
            clickToAdd: "Klik untuk menambahkan",
            totalDiscount: "Total Diskon",
            barPrice: "BAR (Channel Manager)",
            displayPrice: "Harga Tampilan Tamu",
            netRevenue: "Pendapatan Bersih",
            priceCalculator: "Kalkulator Harga",
            pricingExplanation: "Penjelasan Harga",
            step: "Langkah",
            marketingPrograms: "Program Marketing",
            seasonal: "Seasonal", essential: "Essential", targeted: "Targeted",
            genius: "Genius", portfolio: "Portfolio", campaign: "Campaign",
        },
        ms: {
            title: "Promosi & Diskaun",
            selectChannel: "Pilih saluran untuk urus promosi",
            noChannels: "Tiada saluran OTA. Ke tab Tetapan dahulu.",
            addPromotion: "Tambah Promosi",
            discount: "Diskaun",
            active: "Aktif", inactive: "Tidak aktif",
            delete: "Padam", stackable: "Boleh Tindih",
            noPromotions: "Tiada promosi dalam kumpulan ini. Klik untuk tambah.",
            clickToAdd: "Klik untuk tambah",
            totalDiscount: "Jumlah Diskaun",
            barPrice: "BAR (Pengurus Saluran)",
            displayPrice: "Harga Paparan Tetamu",
            netRevenue: "Hasil Bersih",
            priceCalculator: "Kalkulator Harga",
            pricingExplanation: "Penjelasan Harga",
            step: "Langkah",
            marketingPrograms: "Program Pemasaran",
            seasonal: "Bermusim", essential: "Penting", targeted: "Sasaran",
            genius: "Genius", portfolio: "Portfolio", campaign: "Kempen",
        },
        th: {
            title: "โปรโมชั่น & ส่วนลด",
            selectChannel: "เลือกช่องเพื่อจัดการโปรโมชั่น",
            noChannels: "ยังไม่มีช่อง OTA ไปที่แท็บตั้งค่าก่อน",
            addPromotion: "เพิ่มโปรโมชั่น",
            discount: "ส่วนลด",
            active: "เปิดใช้งาน", inactive: "ปิด",
            delete: "ลบ", stackable: "ซ้อนได้",
            noPromotions: "ยังไม่มีโปรโมชั่นในกลุ่มนี้ คลิกเพื่อเพิ่ม",
            clickToAdd: "คลิกเพื่อเพิ่ม",
            totalDiscount: "ส่วนลดรวม",
            barPrice: "BAR (ตัวจัดการช่อง)",
            displayPrice: "ราคาแสดงต่อแขก",
            netRevenue: "รายได้สุทธิ",
            priceCalculator: "เครื่องคำนวณราคา",
            pricingExplanation: "คำอธิบายการคำนวณ",
            step: "ขั้นตอน",
            marketingPrograms: "โปรแกรมการตลาด",
            seasonal: "ตามฤดูกาล", essential: "จำเป็น", targeted: "เป้าหมาย",
            genius: "Genius", portfolio: "พอร์ตโฟลิโอ", campaign: "แคมเปญ",
        },
    },
};

// Extra keys to add to existing 'analytics' namespace for LeadTimeBuckets
const ANALYTICS_EXTRA = {
    en: {
        leadTimeTitle: "Lead-time (Booking Window)",
        avgLeadTimeLabel: "Avg lead-time:",
        daysUnit: "{n} days",
        bookingsLabel: "bookings",
        leadTimeTooltip: "Lead-time: {label}",
    },
    vi: {
        leadTimeTitle: "Thời gian đặt trước",
        avgLeadTimeLabel: "TB thời gian đặt trước:",
        daysUnit: "{n} ngày",
        bookingsLabel: "đặt phòng",
        leadTimeTooltip: "Thời gian đặt: {label}",
    },
    id: {
        leadTimeTitle: "Lead-time (Jendela Pemesanan)",
        avgLeadTimeLabel: "Rata-rata lead-time:",
        daysUnit: "{n} hari",
        bookingsLabel: "pemesanan",
        leadTimeTooltip: "Lead-time: {label}",
    },
    ms: {
        leadTimeTitle: "Lead-time (Tetingkap Tempahan)",
        avgLeadTimeLabel: "Purata lead-time:",
        daysUnit: "{n} hari",
        bookingsLabel: "tempahan",
        leadTimeTooltip: "Lead-time: {label}",
    },
    th: {
        leadTimeTitle: "Lead-time (หน้าต่างการจอง)",
        avgLeadTimeLabel: "เวลานำเฉลี่ย:",
        daysUnit: "{n} วัน",
        bookingsLabel: "การจอง",
        leadTimeTooltip: "Lead-time: {label}",
    },
};

// ═══════════════════════════════════════════════════════════════
// INJECT INTO JSON FILES
// ═══════════════════════════════════════════════════════════════

for (const lang of LANGS) {
    const filePath = path.join(MESSAGES_DIR, `${lang}.json`);
    const json = JSON.parse(fs.readFileSync(filePath, 'utf8'));

    let added = 0;

    // Add new namespaces
    for (const [ns, langData] of Object.entries(NEW_KEYS)) {
        const translations = langData[lang] || langData.en; // fallback to EN
        if (!json[ns]) json[ns] = {};
        for (const [key, val] of Object.entries(translations)) {
            if (!json[ns][key]) {
                json[ns][key] = val;
                added++;
            }
        }
    }

    // Add analytics extras (to existing 'analytics' namespace)
    const analyticsExtras = ANALYTICS_EXTRA[lang] || ANALYTICS_EXTRA.en;
    if (!json.analytics) json.analytics = {};
    for (const [key, val] of Object.entries(analyticsExtras)) {
        if (!json.analytics[key]) {
            json.analytics[key] = val;
            added++;
        }
    }

    fs.writeFileSync(filePath, JSON.stringify(json, null, 2) + '\n', 'utf8');
    console.log(`${lang}: +${added} keys`);
}

console.log('\n✅ All translation keys injected!');
